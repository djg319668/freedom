window.onload=function(){var r=getid("usename"),o=getid("usename-right"),n=getid("usename-msg");isok1=!1,r.onfocus=function(){r.style.background="#eaf5ff",r.style.borderColor="#2648c4",n.innerHTML="用户名的长度应为6-20个字符之间",n.style.color="#666"},r.onblur=function(){var e=r.value;if(e.trim())if(checkReg.name(e)){ajax("post","../api/check_user.php",e,function(e){1==e&&(o.style.display="block",n.innerHTML="",isok1=!0)})}else r.style.background="#fffddf",r.style.borderColor="#800000",n.innerHTML="用户名被占用",n.style.color="#ff0000",o.style.display="none";else r.style.background="#fffddf",r.style.borderColor="#800000",n.innerHTML="用户名的长度应为6-20个字符之间",n.style.color="#ff0000",o.style.display="none"};var t=getid("password"),l=getid("password_right"),s=getid("password_msg");isok2=!1,t.onfocus=function(){t.style.background="#eaf5ff",t.style.borderColor="#2648c4",s.innerHTML="用户名的长度应为6-20个字符之间",s.style.color="#666"},t.onblur=function(){var e=t.value;e.trim()&&checkReg.psweasy(e)?(l.style.display="block",s.innerHTML="",isok2=!0):(t.style.background="#fffddf",t.style.borderColor="#800000",s.innerHTML="密码为6-16位首字母开头",s.style.color="#ff0000",l.style.display="none")};var f=getid("password2"),a=getid("password2_right"),d=getid("password2_msg");isok3=!1,f.onfocus=function(){f.style.background="#eaf5ff",f.style.borderColor="#2648c4",d.innerHTML="请再次输入密码",d.style.color="#666"},f.onblur=function(){var e=t.value,o=f.value;o.trim()?o==e?(a.style.display="block",d.innerHTML="",isok3=!0):(f.style.background="#eaf5ff",f.style.borderColor="#800000",d.innerHTML="密码不一致",d.style.color="#ff0000",a.style.display="none"):(f.style.background="#fffddf",f.style.borderColor="#800000",d.innerHTML="请再次输入密码",d.style.color="#ff0000",a.style.display="none")};var c=getid("email"),u=getid("email_right"),y=getid("email_msg");isok4=!1,c.onfocus=function(){c.style.background="#eaf5ff",c.style.borderColor="#2648c4",y.innerHTML="请输入您的邮箱地址",y.style.color="#666"},c.onblur=function(){var e=c.value;e.trim()?checkReg.email(e)?(u.style.display="block",y.innerHTML="",isok4=!0):(c.style.background="#fffddf",c.style.borderColor="#800000",y.innerHTML="请您输入正确邮箱地址",y.style.color="#ff0000",u.style.display="none"):(c.style.background="#fffddf",c.style.borderColor="#800000",y.innerHTML="请您输入邮箱地址",y.style.color="#ff0000",u.style.display="none")};var g=["0","1","2","3","4","5","6","7","8","9","Q","A","Z","W","S","X","E","D","C","R","F","V","T","G","B","Y","H","N","U","J","M","I","K","O","L","P"];function b(e,o){var r="";for(i=0;i<=o;i++){r+=e[parseInt(35*Math.random())]}return r}var m=getid("randomnum"),k=getid("randomnum_msg"),p=!1;m.innerHTML=b(g,3);var L=getid("random_text");L.onfocus=function(){L.style.background="#eaf5ff",L.style.borderColor="#2648c4",k.innerHTML="请输入验证码",k.style.color="#666"},L.onblur=function(){var e=L.value.toLowerCase(),o=m.innerHTML.toLowerCase();e.trim()?e==o?(k.innerHTML="验证码正确",p=!0):(L.style.background="#fffddf",L.style.borderColor="#800000",k.innerHTML="验证码错误",k.style.color="#ff0000",m.innerHTML=b(g,3)):(L.style.background="#fffddf",L.style.borderColor="#800000",k.innerHTML="请您输入验证码",k.style.color="#ff0000")},getid("zhucebtn").onclick=function(){if(console.log(66),isok1&&isok2&&isok3&&isok4&&p){var o=r.value,e=t.value;ajax("post","../api/reg.php","username="+o+"&password="+e,function(e){console.log(e),1==e&&($.cookie("name",o,{expires:7,path:"/"}),window.location.href="../index.html")})}};var v=getid("left_usename");getid("left_usename_right"),getid("left_usenamemsg");isok1=!1,v.onfocus=function(){v.style.background="#eaf5ff",v.style.borderColor="#2648c4"},v.onblur=function(){v.style.background="#fff",v.style.borderColor="#7f9db9"};var M=getid("left_password"),H=(getid("left_password_right"),getid("left_password_msg"));isok1=!1,M.onfocus=function(){M.style.background="#eaf5ff",M.style.borderColor="#2648c4"},M.onblur=function(){M.style.background="#fff",M.style.borderColor="#7f9db9"};g=["0","1","2","3","4","5","6","7","8","9","Q","A","Z","W","S","X","E","D","C","R","F","V","T","G","B","Y","H","N","U","J","M","I","K","O","L","P"];function b(e,o){var r="";for(i=0;i<=o;i++){r+=e[parseInt(35*Math.random())]}return r}var T=getid("left_randomnum"),_=getid("left_randomnum_msg");T.innerHTML=b(g,3),(C=getid("left_random_text")).onfocus=function(){C.style.background="#eaf5ff",C.style.borderColor="#2648c4"},C.onblur=function(){C.style.background="#fff",C.style.borderColor="#7f9db9"};var e=getid("btn-login"),C=(_=getid("left_randomnum_msg"),H=getid("left_password_msg"),getid("left_random_text"));e.onclick=function(){if(C.value.toLowerCase().trim()==T.innerHTML.toLowerCase().trim()){_.innerHTML="";var o=v.value.trim(),e=M.value.trim();ajax("post","../api/login.php","username="+o+"&password="+e,function(e){console.log(e),1==e?($.cookie("name",o,{expires:7,path:"/"}),window.location.href="../index.html"):(H.innerHTML="用户名或密码错误",H.style.color="red")})}else _.innerHTML="验证码错误",_.style.color="red"}};